<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy for Linux (vers 7 December 2008), see www.w3.org"/>
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8"/>

<meta name="GENERATOR" content="OpenOffice.org 3.0 (Unix)"/>
<meta name="CREATED" content="20151109;11564100"/>
<meta name="CHANGED" content="20151129;1342700"/>
<meta name="Info_1" content=""/>
<meta name="Info_2" content=""/>
<meta name="Info_3" content=""/>
<meta name="Info_4" content=""/>
<title>Essential Python</title>
<meta content="http://www.w3.org/1999/xhtml; charset=utf-8" http-equiv="Content-Type"/><link href="stylesheet.css" type="text/css" rel="stylesheet"/><style type="text/css">
		@page { margin-bottom: 5.000000pt; margin-top: 5.000000pt; }</style></head>
<body dir="ltr" class="calibre">
<h1 lang="en-GB" class="western3" id="calibre_pb_11"><a id="Functions"></a> 13.
Functions</h1>
<p lang="en-GB" class="western">Functions let you break down
your code into smaller parts. By partitioning programs into
functional blocks it makes it easier to understand and maintain the
program. Breaking code down into functional elements also makes it
easier to reuse sections of the code. For example if there is some
functionality that is used in multiple places in the program this
reused code can be can placed into a function and called from
multiple different places with in the program. For example if the
program needs to average a range of values in different sections of
the program a function can be written to average the data and then
this can be called from the required places in the code.</p>
<h2 lang="en-GB" class="western4">Function Definition</h2>
<p lang="en-GB" class="western">The syntax for a Python function
block is</p>
<p lang="en-GB" class="c5"><span class="c6">def
functionname(arguments):</span></p>
<p lang="en-GB" class="c7">“<span class="c8">function_docstring”</span></p>
<p lang="en-GB" class="c5"><span class="c6">function
suite</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
[expression]</span></p>
<p lang="en-GB" class="western">The function starts with the
keyword <b class="calibre2">def</b> this is followed by a function name and then
within parenthesis a list of arguments can be added which allow
data to be passed into a function.</p>
<p lang="en-GB" class="western">The <b class="calibre2">function_docstring</b> is
optional and is the documentation string for the function this
works with pythons <b class="calibre2">help()</b> utility. The documentation string
is followed by the function suite which forms the body of the
function. The last line of the function is a <b class="calibre2">return</b>
statement this is optional and is used to return a value or
multiple values from a function. The following example shows how a
simple function to add two numbers is defined and called from the
program.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
simpleFunctionExample.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># define a function to
add two numbers</span></p>
<p lang="en-GB" class="c5"><span class="c6">def add_two_numbers(d,
e):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""This function adds
two numbers"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">result = d +
e</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
result</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># create some
variables</span></p>
<p lang="en-GB" class="c5"><span class="c6">a = 10</span></p>
<p lang="en-GB" class="c5"><span class="c6">b = 20</span></p>
<p lang="en-GB" class="c5"><span class="c6"># call the
function</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(add_two_numbers(a, b))</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(add_two_numbers(1.4, 2.8))</span></p>
<p lang="en-GB" class="western">Variables that are used as
arguments for functions are passed by reference this means that if
the argument is changed in the function and the variable is not
immutable then it will also change the value of the variable used
in the call to the function.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
passByRefFunctionExample.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># this function adds
to the list</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
append_to_list(mylist):</span></p>
<p lang="en-GB" class="c5"><span class="c6">mylist.append(40)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># this function should
change the value</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
update_list():</span></p>
<p lang="en-GB" class="c5"><span class="c6">mylist = [1, 2,
3]</span></p>
<p lang="en-GB" class="c5"><span class="c6">print("Inside
Function: ", mylist)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># create some
variables</span></p>
<p lang="en-GB" class="c5"><span class="c6">a = [10, 20,
30]</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(a)</span></p>
<p lang="en-GB" class="c5"><span class="c6">append_to_list(a)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(a)</span></p>
<p lang="en-GB" class="c5"><span class="c6">update_list()</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(a)</span></p>
<p lang="en-GB" class="western">In the above code there are two
functions the first is <b class="calibre2">appendToList</b> this appends data to the
passed list and if you run the code then you should get the
following output for the first two print statements.</p>
<p lang="en-GB" class="c5"><span class="c6">[10, 20,
30]</span></p>
<p lang="en-GB" class="c5"><span class="c6">[10, 20, 30,
40]</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="western">The function has done what you
would have had expected it to do, it has appended 40 to the passed
list.</p>
<p lang="en-GB" class="western">The second function
<b class="calibre2">update_list</b> sets the values in the list to [1, 2, 3] in the
function. To show that list has been set to these values the list
is displayed from within the function. However when the value is
printed after the call to <b class="calibre2">update_list</b> the original values
before the function was called are displayed, this is because the
value has been redefined in the function with the = assignment.</p>
<p lang="en-GB" class="western">Care must therefore be taken
with using mutable objects within functions, to help prevent
unintentional errors from cropping into the code it is usually best
to take a local copy of the argument.</p>
<p lang="en-GB" class="western">The <b class="calibre2">return</b> statement is
usually at the end of the function but can be used from anywhere in
the function. So in the following example if <b class="calibre2">a</b> is larger
than 10 then the function will exit the function and return “Too
Big” otherwise it will return “OK”.</p>
<p lang="en-GB" class="c5"><span class="c6">def myfunc
(a):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if (a &gt;
10):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return “Too
Big”</span></p>
<p lang="en-GB" class="c5"><span class="c6">return “OK”</span></p>
<p lang="en-GB" class="western">It is also possible to return
more than one variable from a function the following script shows a
function which returns the maximum and minimum values from a
list.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
returnValues.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
find_max_min(max_min_list):</span></p>
<p lang="en-GB" class="c5"><span class="c6">minval =
0xffffffff</span></p>
<p lang="en-GB" class="c5"><span class="c6">maxval = 0</span></p>
<p lang="en-GB" class="c5"><span class="c6"># loop finding the max
and min values</span></p>
<p lang="en-GB" class="c5"><span class="c6">for i in
max_min_list:</span></p>
<p lang="en-GB" class="c5"><span class="c6">if i &lt;
minval:</span></p>
<p lang="en-GB" class="c5"><span class="c6">minval = i</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif i &gt;
maxval:</span></p>
<p lang="en-GB" class="c5"><span class="c6">maxval = i</span></p>
<p lang="en-GB" class="c5"><span class="c6">return maxval,
minval</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">mylist = [20, 77, 32,
66, 5]</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">maximum, minimum =
find_max_min(mylist)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('Max: ',
maximum, ' Min: ', minimum)</span></p>
<p lang="en-GB" class="western">Since there is no type
associated with the passed variables a function can be used with
more than one type of variable as long as the function supports the
object interface.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
functionPassVar.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def myfunc(data1,
data2):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if data1 ==
data2:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print("Objects are the
same")</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(data1)</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print("Objects are the
different")</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(data1)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(data2)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">myTuple1 = (1, 2, 3,
4)</span></p>
<p lang="en-GB" class="c5"><span class="c6">myTuple2 = (1, 2, 3,
4)</span></p>
<p lang="en-GB" class="c5"><span class="c6">myTuple3 = (1, 3, 3,
4)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">myfunc(myTuple1,
myTuple2)</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfunc(myTuple1,
myTuple3)</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfunc(1,
1)</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfunc(1,
2)</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfunc("Test1",
"Test2")</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfunc("Test3",
"Test3")</span></p>
<p lang="en-GB" class="western">The code above shows a function
that checks if two objects are the same if the are then only one of
the objects is printed, if the objects are different then both the
objects are displayed.</p>
<h2 lang="en-GB" class="western4">Default Function Arguments</h2>
<p lang="en-GB" class="western">Functions can have arguments
with default values these are are sometimes called keyword
arguments, arguments without keywords are called positional. Using
default values is useful if one value will always be the same, or
when a function is designed to work in more than one way depending
on the arguments.</p>
<p lang="en-GB" class="western">When using default values the
arguments in the function definition that do not have default
values should be defined first. The following example shows a
function definition with one positional argument and two keyword
arguments.</p>
<p lang="en-GB" class="c5"><span class="c6">def car(name, doors =
4, type = “Saloon”)</span></p>
<p lang="en-GB" class="western">This function can be called with
just the name argument, in this case the default values for the
other arguments you would used.</p>
<p lang="en-GB" class="c5"><span class="c6">car('Focus')</span></p>
<p lang="en-GB" class="western">To set the car type and the
number of doors.</p>
<p lang="en-GB" class="c5"><span class="c6">car('Focus',
2)</span></p>
<p lang="en-GB" class="western">To set all the arguments use the
arguments in the correct sequence.</p>
<p lang="en-GB" class="c5"><span class="c6">car('Focus', 2,
'Estate')</span></p>
<p lang="en-GB" class="western">If number of doors can be the
default then the keyword can be used to assign the value to the
type argument.</p>
<p lang="en-GB" class="c5"><span class="c6">car('Focus', type =
'Estate')</span></p>
<p lang="en-GB" class="western">The keyword can also be used
define the arguments out of sequence.</p>
<p lang="en-GB" class="c5"><span class="c6">car('Focus', type =
'Estate', doors = 2)</span></p>
<p lang="en-GB" class="western">Python evaluates the default
value of a argument when the program is started, if you use a name
as a default value in the function then the value of the argument
when the function is defined is the value that will be used. The
following code should help to explain this.</p>
<p lang="en-GB" class="c5"><span class="c6">defaultvalue =
0</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def foo(value =
defaultvalue):</span></p>
<p lang="en-GB" class="c5"><span class="c6">print
(value)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">#call the
function</span></p>
<p lang="en-GB" class="c5"><span class="c6">#change the default
value</span></p>
<p lang="en-GB" class="c5"><span class="c6">defaultvalue =
1</span></p>
<p lang="en-GB" class="c5"><span class="c6">foo()</span></p>
<p lang="en-GB" class="western">The result of running the code
will be</p>
<p lang="en-GB" class="c5"><span class="c6">0</span></p>
<p lang="en-GB" class="c5"><span class="c6">0</span></p>
<p lang="en-GB" class="western">This shows that the default
value was set when the function was defined and that even though
the default value was changed in the script this had no effect.</p>
<h2 lang="en-GB" class="western4">Variable Length Arguments</h2>
<p lang="en-GB" class="western">In some cases it might be
required to write a function with a variable number of arguments,
These arguments are called variable length arguments and the
arguments are not explicitly named in the function definition.</p>
<p lang="en-GB" class="western">The following shows a definition
of a function that takes a formal argument and also a variable
length argument.</p>
<p lang="en-GB" class="c5"><span class="c6">def
varparmafunc(title, *data)</span></p>
<p lang="en-GB" class="western">The formal argument in the above
example is title and the variable length argument is data the *
before the argument name shows that it is a variable length
argument. Variable length arguments are passed as a tuple. The
tuple remains empty if no additional arguments are called. The
following script shows a function with a variable argument list in
action.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
variableLengthParameters.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
varparmafunc(title, *data):</span></p>
<p lang="en-GB" class="c5"><span class="c6"># print
title</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(title)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># check if any data in
tuple</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
len(data):</span></p>
<p lang="en-GB" class="c5"><span class="c6"># print
tuple</span></p>
<p lang="en-GB" class="c5"><span class="c6">for item in
data:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(item)</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print("No
Data")</span></p>
<p lang="en-GB" class="c5"><span class="c6">print()</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">varparmafunc("Test1")</span></p>
<p lang="en-GB" class="c5"><span class="c6">varparmafunc("Test2",
"Jon", "Simon", "Tan")</span></p>
<p lang="en-GB" class="c5"><span class="c6">varparmafunc("Test3",
1, 2, 4, 7)</span></p>
<p lang="en-GB" class="western">The above program gives the
following output showing variable length arguments in action.</p>
<p lang="en-GB" class="c5"><span class="c6">Test1</span></p>
<p lang="en-GB" class="c5"><span class="c6">No Data</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">Test2</span></p>
<p lang="en-GB" class="c5"><span class="c6">Jon</span></p>
<p lang="en-GB" class="c5"><span class="c6">Simon</span></p>
<p lang="en-GB" class="c5"><span class="c6">Tan</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">Test3</span></p>
<p lang="en-GB" class="c5"><span class="c6">1</span></p>
<p lang="en-GB" class="c5"><span class="c6">2</span></p>
<p lang="en-GB" class="c5"><span class="c6">4</span></p>
<p lang="en-GB" class="c5"><span class="c6">7</span></p>
<h2 lang="en-GB" class="western4">Anonymous Functions</h2>
<p lang="en-GB" class="western">Anonymous functions are small
functions which are not declared in the standard way using the
<b class="calibre2">def</b> keyword. Anonymous functions are defined using the
<b class="calibre2">lambda</b> keyword, they can have any number of arguments and
also return a value. They cannot contain multiple expressions or
statements. Lambda functions have their own namespace and can only
access global variables or those in their name space. A
<b class="calibre2">lambda</b> is an expression not a statement, and it can appear
anywhere that an expression is allowed.</p>
<p lang="en-GB" class="western">The syntax of a lambda function
is</p>
<p lang="en-GB" class="c5"><span class="c6">lambda[arg1[,
arg2,..]:expression</span></p>
<p lang="en-GB" class="western">An example of a lambda function
is shown below</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
anonymousFunction.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">product = lambda a, b:
a * b</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">print(product(2,
3))</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(product(2,
6))</span></p>
<h2 lang="en-GB" class="western4">Map Function</h2>
<p lang="en-GB" class="western">The map function is a built in
function which allows a function to be run on each item in a
iterable object.</p>
<p lang="en-GB" class="western">The code below shows two
examples of the map function. The first uses a normal function to
increment the items in the list if they are less than 10 and the
second example uses a lambda function to multiply all the values by
2.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
mapExample.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
incfunc(data):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""function to
increment the passed value if it is less than 10"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">if data &lt;
10:</span></p>
<p lang="en-GB" class="c5"><span class="c6">data += 1</span></p>
<p lang="en-GB" class="c5"><span class="c6">return data</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">myList = [1, 2, 3, 10,
20, 30]</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># increment the values
if they are less than 10</span></p>
<p lang="en-GB" class="c5"><span class="c6">newList =
list(map(incfunc, myList))</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(newList)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># multiply all the
values by 2 using a lambda function</span></p>
<p lang="en-GB" class="c5"><span class="c6">newList =
list(map((lambda x: x * 2), myList))</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(newList)</span></p>
<h2 lang="en-GB" class="western4">Filter Function</h2>
<p lang="en-GB" class="western">Filter is similar to map in that
it works on iterable objects, it is used to filter out objects
dependant on a test function.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
filterExample.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># create a list with
the values 1 to 9</span></p>
<p lang="en-GB" class="c5"><span class="c6">myList = list(range(1,
10))</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(myList)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># create a new list
from the old for values larger than 5</span></p>
<p lang="en-GB" class="c5"><span class="c6">newList =
list(filter((lambda x: x &gt; 5), myList))</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(newList)</span></p>
<p lang="en-GB" class="western">This example will create a new
list from the one that it is operating on the new list will only
contain values that are larger than 5 from the old list.</p>
<h2 lang="en-GB" class="western4">Reduce Function</h2>
<p lang="en-GB" class="western">Reduce works similarly to map
but it returns a single result not an iterable object. It works by
passing each item from the iterable loop into the passed function.
The first value passed into the function is used to initialise the
result.</p>
<p lang="en-GB" class="c5"><span class="c6">#File:
ReduceExample.py</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">from functools import
reduce</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">myList = list(range(1,
20))</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def addIfLessTen(x,
y):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if (y &lt;
10):</span></p>
<p lang="en-GB" class="c5"><span class="c6">x += y</span></p>
<p lang="en-GB" class="c5"><span class="c6">return x</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">#use reduce to add all
the values in the list which are &lt; 10</span></p>
<p lang="en-GB" class="c5"><span class="c6">result =
reduce(addIfLessTen, myList)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(result)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">#use reduce to add all
the values in the list</span></p>
<p lang="en-GB" class="c5"><span class="c6">result =
reduce((lambda x, y: x + y), myList)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(result)</span></p>
<p lang="en-GB" class="western">The code shows two examples of
reduce being used one with a regular function which adds the values
in the list if they are smaller than 10 and the other which uses a
lamda function to add all the values in the list.</p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
</body>
</html>

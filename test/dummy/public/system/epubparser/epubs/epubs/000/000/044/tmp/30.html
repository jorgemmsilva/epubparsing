<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy for Linux (vers 7 December 2008), see www.w3.org"/>
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8"/>

<meta name="GENERATOR" content="OpenOffice.org 3.0 (Unix)"/>
<meta name="CREATED" content="20151109;11564100"/>
<meta name="CHANGED" content="20151129;1342700"/>
<meta name="Info_1" content=""/>
<meta name="Info_2" content=""/>
<meta name="Info_3" content=""/>
<meta name="Info_4" content=""/>
<title>Essential Python</title>
<meta content="http://www.w3.org/1999/xhtml; charset=utf-8" http-equiv="Content-Type"/><link href="stylesheet.css" type="text/css" rel="stylesheet"/><style type="text/css">
		@page { margin-bottom: 5.000000pt; margin-top: 5.000000pt; }</style></head>
<body dir="ltr" class="calibre">
<h1 lang="en-GB" class="western3" id="calibre_pb_27"><a id="Appendix_3_252525E2_25252580_252"></a> 29. Appendix 3– Bug
Tracker Code</h1>
<h2 lang="en-GB" class="western4">Issue.py</h2>
<p lang="en-GB" class="c5"><span class="c6"># File:
issue.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">import time</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">class
Issue:</span></p>
<p lang="en-GB" class="c5"><span class="c6">numberIssues =
0</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># Definitions for type
of issue</span></p>
<p lang="en-GB" class="c5"><span class="c6">BUG = 0</span></p>
<p lang="en-GB" class="c5"><span class="c6">NEW_FEATURE =
1</span></p>
<p lang="en-GB" class="c5"><span class="c6">IMPROVEMENT =
2</span></p>
<p lang="en-GB" class="c5"><span class="c6">TASK = 3</span></p>
<p lang="en-GB" class="c5"><span class="c6">UNDEFINED =
4</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># Definitions for
state</span></p>
<p lang="en-GB" class="c5"><span class="c6">OPEN = 0</span></p>
<p lang="en-GB" class="c5"><span class="c6">RESOLVED =
1</span></p>
<p lang="en-GB" class="c5"><span class="c6">CLOSED = 2</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># Dictionary for
type</span></p>
<p lang="en-GB" class="c5"><span class="c6">typeDict = {BUG:
"Bug", NEW_FEATURE: "New Feature", IMPROVEMENT: "Improvement",
TASK: "Task",</span></p>
<p lang="en-GB" class="c5"><span class="c6">UNDEFINED:
"Undefined"}</span></p>
<p lang="en-GB" class="c5"><span class="c6"># Dictionary for
state</span></p>
<p lang="en-GB" class="c5"><span class="c6">stateDict = {OPEN:
"Open", RESOLVED: "Resolved", CLOSED: "Closed"}</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">@staticmethod</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_type_str(key):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if key &lt;
len(Issue.typeDict):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
Issue.typeDict[key]</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">return ''</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">@staticmethod</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_number_types():</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
len(Issue.typeDict)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">@staticmethod</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_state_str(key):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if key &lt;
len(Issue.stateDict):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
Issue.stateDict[key]</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">return ''</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">@staticmethod</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_number_states():</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
len(Issue.stateDict)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">#
constructor</span></p>
<p lang="en-GB" class="c5"><span class="c6">def __init__(self,
issuestype, title, details):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if issuestype &lt;=
Issue.UNDEFINED:</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._type =
issuestype</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._type =
Issue.UNDEFINED</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._title =
title</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._details =
details</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._date =
time.localtime(time.time())</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._state =
Issue.OPEN</span></p>
<p lang="en-GB" class="c5"><span class="c6">Issue.numberIssues +=
1</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
__del__(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if Issue.numberIssues
&gt; 0:</span></p>
<p lang="en-GB" class="c5"><span class="c6">Issue.numberIssues -=
1</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># overload
print()</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
__str__(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">template = "{0}
{1}\nType:{2} State:{3}\n{4} \n"</span></p>
<p lang="en-GB" class="c5"><span class="c6">datestr =
time.strftime("%d/%m/%y", self._date)</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
template.format(self._title, datestr, Issue.typeDict[self._type],
Issue.stateDict[self._state],</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._details)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def search(self,
searchstr):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
self._title.find(searchstr) or
self._details.find(searchstr):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return True</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
False</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def set_state(self,
state):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if state &lt;=
Issue.CLOSED:</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._state =
state</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def set_type(self,
issuestype):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if issuestype &lt;=
Issue.UNDEFINED:</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._type =
issuestype</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def set_title(self,
title):</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._title =
title</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def set_details(self,
details):</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._title =
details</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_details(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
self._details</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_title(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
self._title</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_type(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
Issue.typeDict[self._type]</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_state(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
Issue.stateDict[self._state]</span></p>
<h2 lang="en-GB" class="western4">project.py</h2>
<p lang="en-GB" class="c5"><span class="c6"># File:
project.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">class
Project:</span></p>
<p lang="en-GB" class="c5"><span class="c6">numberProjects =
0</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">#
constructor</span></p>
<p lang="en-GB" class="c5"><span class="c6">def __init__(self,
title='unknown'):</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._title =
title</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._issues =
[]</span></p>
<p lang="en-GB" class="c5"><span class="c6">Project.numberProjects
+= 1</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># overload
print()</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
__str__(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6"># build a list of
issues</span></p>
<p lang="en-GB" class="c5"><span class="c6">issuelist =
''</span></p>
<p lang="en-GB" class="c5"><span class="c6">for (index, i) in
enumerate(self._issues):</span></p>
<p lang="en-GB" class="c5"><span class="c6">issuetemp = '{0:3}.
{1:11} - {2:8} {3}\n'</span></p>
<p lang="en-GB" class="c5"><span class="c6">issuelist +=
issuetemp.format(index, i.get_type(), i.get_state(),
i.get_title())</span></p>
<p lang="en-GB" class="c5"><span class="c6">template = 'Project:
{0} Issues: {1}\n{2}'</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
template.format(self._title, len(self._issues),
issuelist)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># search the items and
display any that match the string</span></p>
<p lang="en-GB" class="c5"><span class="c6">def search(self,
string):</span></p>
<p lang="en-GB" class="c5"><span class="c6">for i in
self._issues:</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
i.search(string):</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(i)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># add an
issue</span></p>
<p lang="en-GB" class="c5"><span class="c6">def add_issue(self,
issue):</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._issues.append(issue)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># remove an
issue</span></p>
<p lang="en-GB" class="c5"><span class="c6">def remove_issue(self,
index):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if index &lt;
len(self._issues):</span></p>
<p lang="en-GB" class="c5"><span class="c6">del
self._issues[index]</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the project
title</span></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_title(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
self._title</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_number_issues(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
len(self._issues)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def update_issue(self,
index, issue):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if index &lt;
len(self._issues):</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._issues[index] =
issue</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def get_issue(self,
index):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if index &lt;
len(self._issues):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
self._issues[index]</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
get_details(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
self._title</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
display_issue(self, index):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if index &lt;
len(self._issues):</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(self._issues[index])</span></p>
<h2 lang="en-GB" class="western4">bugTracker.py</h2>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># File:
buTracker.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""bugTracker class -
This class is the command interface for the
bugTracker"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">import
pickle</span></p>
<p lang="en-GB" class="c5"><span class="c6">from project import
Project</span></p>
<p lang="en-GB" class="c5"><span class="c6">from issue import
Issue</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">class
BugTracker:</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""The main class for
bug tracker handles input and output"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">NO_PROJECT =
0xffffffff</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
__init__(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Constructor"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._projects =
[]</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._currentProject =
self.NO_PROJECT</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
command_interface(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""The main command
loop runs until exit is entered"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('Bug
Tracker')</span></p>
<p lang="en-GB" class="c5"><span class="c6">inputstr =
''</span></p>
<p lang="en-GB" class="c5"><span class="c6">while inputstr !=
'exit':</span></p>
<p lang="en-GB" class="c5"><span class="c6">inputstr =
input('&gt;')</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.parsemessage(inputstr)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
new_project(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Creates a new
project"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">inputstr =
input('Project Name:')</span></p>
<p lang="en-GB" class="c5"><span class="c6"># if nothing is
entered so don't create a project</span></p>
<p lang="en-GB" class="c5"><span class="c6">if inputstr ==
'':</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('No project
created')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">x =
Project(inputstr)</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._projects.append(x)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
view_projects(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Lists all the
current projects"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">if len(self._projects)
== 0:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('No
projects..')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">for i in
self._projects:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(i.get_title())</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
select_project(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Selects a project
from a list"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('Projects:')</span></p>
<p lang="en-GB" class="c5"><span class="c6">if len(self._projects)
== 0:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('No
projects..')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6"># display all the
projects</span></p>
<p lang="en-GB" class="c5"><span class="c6">for (index, i) in
enumerate(self._projects):</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(' ', index, ' -
', i.get_title())</span></p>
<p lang="en-GB" class="c5"><span class="c6"># select the
project</span></p>
<p lang="en-GB" class="c5"><span class="c6">success, i =
self.input_number('Select Project: ',
len(self._projects))</span></p>
<p lang="en-GB" class="c5"><span class="c6">if success:</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._currentProject =
i</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('?')</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
new_issue(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Creates a new
issue"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
self._currentProject == self.NO_PROJECT:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('No project
selected')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6"># select the type of
project</span></p>
<p lang="en-GB" class="c5"><span class="c6">success, typeid =
self.select_type('Select Issue Type: ')</span></p>
<p lang="en-GB" class="c5"><span class="c6">if success:</span></p>
<p lang="en-GB" class="c5"><span class="c6"># input the
title</span></p>
<p lang="en-GB" class="c5"><span class="c6">title = input('Title:
')</span></p>
<p lang="en-GB" class="c5"><span class="c6"># check the title is
ok</span></p>
<p lang="en-GB" class="c5"><span class="c6">if title !=
'':</span></p>
<p lang="en-GB" class="c5"><span class="c6"># input the
description</span></p>
<p lang="en-GB" class="c5"><span class="c6">details =
input('Details: ')</span></p>
<p lang="en-GB" class="c5"><span class="c6">project =
self._projects[self._currentProject]</span></p>
<p lang="en-GB" class="c5"><span class="c6"># create the
issue</span></p>
<p lang="en-GB" class="c5"><span class="c6">issue = Issue(typeid,
title, details)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># add the issue to the
project</span></p>
<p lang="en-GB" class="c5"><span class="c6">project.add_issue(issue)</span></p>
<p lang="en-GB" class="c5"><span class="c6">return</span></p>
<p lang="en-GB" class="c5"><span class="c6"># An error
occurred</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('?')</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
view_issues(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Displays the
projects"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
self._currentProject == self.NO_PROJECT:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('No project
selected')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">project =
self._projects[self._currentProject]</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(project)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
view_issue(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Displays a selected
issue"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
self._currentProject == self.NO_PROJECT:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('No project
selected')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6"># Select an
issue</span></p>
<p lang="en-GB" class="c5"><span class="c6">success, issueindex =
self.select_issue()</span></p>
<p lang="en-GB" class="c5"><span class="c6">if success:</span></p>
<p lang="en-GB" class="c5"><span class="c6">project =
self._projects[self._currentProject]</span></p>
<p lang="en-GB" class="c5"><span class="c6">project.display_issue(issueindex)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def input_number(self,
description, maxvalue):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Allows input if a
number and verifies its with range"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">desstr =
input(description)</span></p>
<p lang="en-GB" class="c5"><span class="c6">try:</span></p>
<p lang="en-GB" class="c5"><span class="c6"># convert to
int</span></p>
<p lang="en-GB" class="c5"><span class="c6">value =
int(desstr)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># Check
range</span></p>
<p lang="en-GB" class="c5"><span class="c6">if value &lt;=
maxvalue:</span></p>
<p lang="en-GB" class="c5"><span class="c6">return True,
value</span></p>
<p lang="en-GB" class="c5"><span class="c6">except
ValueError:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('?')</span></p>
<p lang="en-GB" class="c5"><span class="c6">return False,
0</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('?')</span></p>
<p lang="en-GB" class="c5"><span class="c6">return False,
0</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
select_issue(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Allows selection of
an image from a list"""</span></p>
<p lang="en-GB" class="c5"><span class="c6"># list the
issues</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.view_issues()</span></p>
<p lang="en-GB" class="c5"><span class="c6">project =
self._projects[self._currentProject]</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
self.input_number('Select Issue: ',
project.get_number_issues())</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def select_type(self,
desc):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Allows selection of
issue type"""</span></p>
<p lang="en-GB" class="c5"><span class="c6"># print the
types</span></p>
<p lang="en-GB" class="c5"><span class="c6">for i in
range(Issue.get_number_types()):</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(i,
Issue.get_type_str(i))</span></p>
<p lang="en-GB" class="c5"><span class="c6"># get the
type</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
self.input_number(desc, Issue.get_number_types())</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
select_status(self, desstr):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Allows selection of
issue status"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">for i in
range(Issue.get_number_states()):</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(i,
Issue.get_state_str(i))</span></p>
<p lang="en-GB" class="c5"><span class="c6">return
self.input_number(desstr, Issue.get_number_types())</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
edit_issue(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Allows the user to
select an issue and edit it"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
self._currentProject == self.NO_PROJECT:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('No project
selected')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6"># select an
issue</span></p>
<p lang="en-GB" class="c5"><span class="c6">success, issueindex =
self.select_issue()</span></p>
<p lang="en-GB" class="c5"><span class="c6">if success:</span></p>
<p lang="en-GB" class="c5"><span class="c6"># get the
issue</span></p>
<p lang="en-GB" class="c5"><span class="c6">project =
self._projects[self._currentProject]</span></p>
<p lang="en-GB" class="c5"><span class="c6">issue =
project.get_issue(issueindex)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># get the
type</span></p>
<p lang="en-GB" class="c5"><span class="c6">desstr = 'Select Issue
Type: ' + issue.get_type() + ': '</span></p>
<p lang="en-GB" class="c5"><span class="c6">success, typeid =
self.select_type(desstr)</span></p>
<p lang="en-GB" class="c5"><span class="c6">if success:</span></p>
<p lang="en-GB" class="c5"><span class="c6">issue.set_type(typeid)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># get the
state</span></p>
<p lang="en-GB" class="c5"><span class="c6">success, stateid =
self.select_status(desstr)</span></p>
<p lang="en-GB" class="c5"><span class="c6">if success:</span></p>
<p lang="en-GB" class="c5"><span class="c6">issue.set_state(stateid)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># input the
title</span></p>
<p lang="en-GB" class="c5"><span class="c6">title = input('Title:
' + issue.get_title() + ': ')</span></p>
<p lang="en-GB" class="c5"><span class="c6"># check the title is
ok</span></p>
<p lang="en-GB" class="c5"><span class="c6">if title !=
'':</span></p>
<p lang="en-GB" class="c5"><span class="c6">issue.set_title(title)</span></p>
<p lang="en-GB" class="c5"><span class="c6">details =
input('Details: ' + issue.get_details() + ': ')</span></p>
<p lang="en-GB" class="c5"><span class="c6">if details !=
'':</span></p>
<p lang="en-GB" class="c5"><span class="c6">issue.set_details(title)</span></p>
<p lang="en-GB" class="c5"><span class="c6">project.update_issue(issue)</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('?')</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
search_issue(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Allows searching in
all issue with a string"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
self._currentProject == self.NO_PROJECT:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('No project
selected')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">project =
self._projects[self._currentProject]</span></p>
<p lang="en-GB" class="c5"><span class="c6">search = input('Search
For:')</span></p>
<p lang="en-GB" class="c5"><span class="c6">project.search(search)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
help(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Displays the help
screen"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('new project
(np)')</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('view projects
(vp)')</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('select project
(sp)')</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('new issue
(ni)')</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('view issues
(vis)')</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('edit issue
(ei)')</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('help
(?)')</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
save_project(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Saves all the
projects"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">filename =
input('Filename :')</span></p>
<p lang="en-GB" class="c5"><span class="c6">if filename !=
'':</span></p>
<p lang="en-GB" class="c5"><span class="c6"># open a
file</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfile =
open(filename, 'wb')</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
myfile.close:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('Can\'t open
file!')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">pickle.dump(self._projects, myfile)</span></p>
<p lang="en-GB" class="c5"><span class="c6">pickle.dump(self._currentProject, myfile)</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfile.close()</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('File
Saved')</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
load_project(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""loads all the
projects"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">filename =
input('Filename :')</span></p>
<p lang="en-GB" class="c5"><span class="c6">if filename !=
'':</span></p>
<p lang="en-GB" class="c5"><span class="c6"># open a
file</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfile =
open(filename, 'rb')</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
myfile.close:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('Can\'t open
file!')</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._projects =
pickle.load(myfile)</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._currentProject =
pickle.load(myfile)</span></p>
<p lang="en-GB" class="c5"><span class="c6">myfile.close()</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('File
loaded')</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def parsemessage(self,
inputstr):</span></p>
<p lang="en-GB" class="c5"><span class="c6">"""Parses the command
line input"""</span></p>
<p lang="en-GB" class="c5"><span class="c6">if inputstr == 'new
project' or inputstr == 'np':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.new_project()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr == 'view
projects' or inputstr == 'vp':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.view_projects()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr ==
'select project' or inputstr == 'sp':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.select_project()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr == 'new
issue' or inputstr == 'ni':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.new_issue()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr == 'view
issues' or inputstr == 'vs':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.view_issues()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr == 'view
issue' or inputstr == 'vi':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.view_issue()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr == 'edit
issue' or inputstr == 'ei':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.edit_issue()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr ==
'search issue' or inputstr == 'si':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.search_issue()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr ==
'save' or inputstr == 'sa':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.save_project()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr ==
'load' or inputstr == 'lo':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.load_project()</span></p>
<p lang="en-GB" class="c5"><span class="c6">elif inputstr ==
'help' or inputstr == '?':</span></p>
<p lang="en-GB" class="c5"><span class="c6">self.help()</span></p>
<p lang="en-GB" class="c5"><span class="c6">else:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('?')</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">def
create_dummy(self):</span></p>
<p lang="en-GB" class="c5"><span class="c6">x =
Project('test1')</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._projects.append(x)</span></p>
<p lang="en-GB" class="c5"><span class="c6">y =
Project('test2')</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._projects.append(y)</span></p>
<p lang="en-GB" class="c5"><span class="c6">self._currentProject =
0</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">if __name__ ==
'__main__':</span></p>
<p lang="en-GB" class="c5"><span class="c6">bt =
BugTracker()</span></p>
<p lang="en-GB" class="c5"><span class="c6">bt.create_dummy()</span></p>
<p lang="en-GB" class="c5"><span class="c6">bt.command_interface()</span></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
</body>
</html>

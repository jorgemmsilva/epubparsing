<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy for Linux (vers 7 December 2008), see www.w3.org"/>
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8"/>

<meta name="GENERATOR" content="OpenOffice.org 3.0 (Unix)"/>
<meta name="CREATED" content="20151109;11564100"/>
<meta name="CHANGED" content="20151129;1342700"/>
<meta name="Info_1" content=""/>
<meta name="Info_2" content=""/>
<meta name="Info_3" content=""/>
<meta name="Info_4" content=""/>
<title>Essential Python</title>
<meta content="http://www.w3.org/1999/xhtml; charset=utf-8" http-equiv="Content-Type"/><link href="stylesheet.css" type="text/css" rel="stylesheet"/><style type="text/css">
		@page { margin-bottom: 5.000000pt; margin-top: 5.000000pt; }</style></head>
<body dir="ltr" class="calibre">
<h1 lang="en-GB" class="western3" id="calibre_pb_16"><a id="Date_and_Time"></a>
18. Date and Time</h1>
<h2 lang="en-GB" class="western4">Time Module</h2>
<p lang="en-GB" class="western">The time module is used to
handle time and dates in Python. Time intervals are expressed as a
floating point value defined in seconds since 0:00 January 1, 1970
this date is known as the epoch.</p>
<p lang="en-GB" class="western">The following code displays the
tick time for 0.5 of a second.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
timeExample.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">import time</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># calc an end time 0.5
seconds after the current time</span></p>
<p lang="en-GB" class="c5"><span class="c6">endTime = time.time()
+ 0.5</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># display the tick
until time has expired</span></p>
<p lang="en-GB" class="c5"><span class="c6">while endTime &gt;
time.time():</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(time.time())</span></p>
<p lang="en-GB" class="western">The <b class="calibre2">localtime</b> method can
be used to convert the tick time into the current data and time.
The following example gets the local time as a tuple and then gets
a structure of the time and displays the current date using the
tuple and current time using the structure.</p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># File
localTimeExample.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">import time</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the current
time</span></p>
<p lang="en-GB" class="c5"><span class="c6">ticks =
time.time()</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the local time
as a tuple</span></p>
<p lang="en-GB" class="c5"><span class="c6">localTime =
time.localtime(time.time())</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(localTime[0],
"/", localTime[1], "/", localTime[2])</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the time
structure</span></p>
<p lang="en-GB" class="c5"><span class="c6">var =
time.struct_time(localTime)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># print values using
the structure</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(var.tm_hour,
":", var.tm_min, ":", var.tm_sec)</span></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="list-indent-western">The tuple
index,struct_time and values are shown below</p>
<p lang="en-GB" class="list-indent-western">0 tm_year Year 2014</p>
<p lang="en-GB" class="list-indent-western">1 tm_mon Month 1 to
12</p>
<p lang="en-GB" class="list-indent-western">2 tm_mday Day 1 to
31</p>
<p lang="en-GB" class="list-indent-western">3 tm_hour Hour 0 to
23</p>
<p lang="en-GB" class="list-indent-western">4 tm_min Minute 0 to
59</p>
<p lang="en-GB" class="list-indent-western">5 tm_sec Second 0 to 61
(60 and 61 are leap seconds)</p>
<p lang="en-GB" class="list-indent-western">6 tm_wday Day of the
week 0 to 6 (0 = Monday)</p>
<p lang="en-GB" class="list-indent-western">7 tm_yday Day of the
year 1 to 366 (Julian day)</p>
<p lang="en-GB" class="list-indent-western">8 tm_isdst Daylight
saving -1, 0, 1, -1 if library determines DST</p>
<h2 lang="en-GB" class="western4">Formatted Time</h2>
<p lang="en-GB" class="western">The <b class="calibre2">asctime</b> method gives
an easy way to get the time in a readable format.</p>
<p lang="en-GB" class="c5"><span class="c6"># File
formatTimeExample.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">import time</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the current
time</span></p>
<p lang="en-GB" class="c5"><span class="c6">ticks =
time.time()</span></p>
<p lang="en-GB" class="c5"><span class="c6"># get the local
time</span></p>
<p lang="en-GB" class="c5"><span class="c6">localTime =
time.localtime(time.time())</span></p>
<p lang="en-GB" class="c5"><span class="c6"># get the formatted
time</span></p>
<p lang="en-GB" class="c5"><span class="c6">formattedTime =
time.asctime(localTime)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># print values using
the structure</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(formattedTime)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="western">The above example will produce
something like the following</p>
<p lang="en-GB" class="c5"><span class="c6">Wed May 7 20:05:34
2014</span></p>
<p lang="en-GB" class="western">For more control over the
formatting of the time you can use the <b class="calibre2">strftime</b> string
format method.</p>
<p lang="en-GB" class="c5"><span class="c6"># File
formatTimeExample1.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">import time</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(time.strftime("%H:%M:%S %b//%d//%Y ",
time.gmtime(time.time())))</span></p>
<p lang="en-GB" class="western">The above example shows how
<b class="calibre2">strftime</b> works, it takes two arguments a format string and
the <b class="calibre2">localTime</b> tuple and converts this into a string. The
formatting codes used in the formatting string are shown in the
table below</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%a</b> Abbreviated
weekday name.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%A</b> Full weekday
name.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%b</b> Abbreviated
month name.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%B</b> Full month
name.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%c</b> Appropriate
date and time representation.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%d</b> Day of the
month [01, 31]</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%H</b> Hour 24 hour
clock [00, 23]</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%I</b> Hour 12 hour
clock [01, 12]</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%j</b> Day of the
year [001, 366]</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%m</b> Month
[01,12]</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%M</b> Minute
[00,59]</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%p</b> AM or PM.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%S</b> Second
[00,61].</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%U</b> Week number
of the year (Sunday as the first day of the week)[00,53]. All days
in a new year preceding the first Sunday are considered to be in
week 0.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%w</b> Weekday [0
=Sunday, 6 = Saturday].</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%W</b> Week number
of the year (Monday as the first day of the week)[00,53]. All days
in a new year preceding the first Monday are considered to be in
week 0.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%x</b> Local date
representation.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%X</b> Localtime
representation.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%y</b> Year without
century [00, 99].</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%Y</b> Year with
century as a decimal number.</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%Z</b> Time zone
name</p>
<p lang="en-GB" class="list-indent-western"><b class="calibre2">%%</b> '%'
character.</p>
<h2 lang="en-GB" class="western4">DateTime Module</h2>
<p lang="en-GB" class="western">The <b class="calibre2">datetime</b> module is
designed for manipulating dates and times, it includes the
<b class="calibre2">timedelta</b> object which can be used to calculate the
difference between two times or dates. The following code shows
examples of how the <b class="calibre2">datetime</b>, <b class="calibre2">timedelta</b> and
<b class="calibre2">replace</b> method which is used to change the values in the
datetime object work.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
dateTimeExample.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">import
datetime</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># create 2 datetime
objects</span></p>
<p lang="en-GB" class="c5"><span class="c6">dt1 =
datetime.datetime(2014, 6, 3, 22, 56, 33)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(dt1)</span></p>
<p lang="en-GB" class="c5"><span class="c6">dt2 =
datetime.datetime(2013, 8, 9, 13, 45, 22)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(dt2)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># display the
difference</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(dt2 -
dt1)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(dt1.date())</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(dt1.time())</span></p>
<p lang="en-GB" class="c5"><span class="c6"># replace the year in
dt2</span></p>
<p lang="en-GB" class="c5"><span class="c6">dt2 =
dt2.replace(year=2015)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(dt2)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># convert the date to
a time tuple</span></p>
<p lang="en-GB" class="c5"><span class="c6">timetuple =
dt2.timetuple()</span></p>
<p lang="en-GB" class="c5"><span class="c6"># print the
tuple</span></p>
<p lang="en-GB" class="c5"><span class="c6">for i in
timetuple:</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(i)</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># Get a time delta
object</span></p>
<p lang="en-GB" class="c5"><span class="c6">td1 =
datetime.timedelta(weeks=35, days=84, hours=3, minutes=50,
seconds=43)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># do some calculations
with datetime and time delta objects</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(dt2 +
td1)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(dt1 -
td1)</span></p>
<h2 lang="en-GB" class="western4">Calendar Module</h2>
<p lang="en-GB" class="western">The calender module allows you
to work with calendars and is often a better library to use than
the <b class="calibre2">datetime</b> module.</p>
<p lang="en-GB" class="western">The following code will print a
calendar for the year 2014.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
calendarExample.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">import
calendar</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6">for month in range(1,
13):</span></p>
<p lang="en-GB" class="c5"><span class="c6">cal =
calendar.month(2014, month)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(cal)</span></p>
<p lang="en-GB" class="western">The calendar module has lots of
useful methods for determining calendar information. <b class="calibre2">isleap</b>
returns true if the year is a leap year and <b class="calibre2">leapdays</b> returns
the number of leap days in a range of years</p>
<p lang="en-GB" class="c5"><span class="c6">calendar.isleap(2011)</span></p>
<p lang="en-GB" class="c5"><span class="c6">calendar.leapdays(2000, 2010)</span></p>
<p lang="en-GB" class="western">To get a matrix representing the
dates in the month the <b class="calibre2">monthcalendar</b> method can be used,
each row of the matrix represents a week, days outside of the month
are represented with a zero. The week starts on a Monday unless
this has been changed using the <b class="calibre2">setfirstweekday</b> method. To
find the start day of the month and the number of days in the month
the <b class="calibre2">monthrange</b> method can be used.</p>
<p lang="en-GB" class="c5"><span class="c6"># get matrix for June
2015</span></p>
<p lang="en-GB" class="c5"><span class="c6">calendar.monthcalendar(2015, 6)</span></p>
<p lang="en-GB" class="c5"><span class="c6"># find the range for
June 2014</span></p>
<p lang="en-GB" class="c5"><span class="c6">calendar.monthrange(2014, 6)</span></p>
<p lang="en-GB" class="western">Other methods include the
<b class="calibre2">prcal</b> method which prints the calendar for the entire year
and the weekday method which returns the weekday code for the
passed date. The following example shows these methods in
action.</p>
<p lang="en-GB" class="c5"><span class="c6"># File:
calendarExample1.py</span></p>
<p lang="en-GB" class="c5"><span class="c6">import
calendar</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># find leap
years</span></p>
<p lang="en-GB" class="c5"><span class="c6">for i in range(2000,
2010):</span></p>
<p lang="en-GB" class="c5"><span class="c6">if
calendar.isleap(i):</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(i, 'is leap
year')</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># show start day and
the number of days in month</span></p>
<p lang="en-GB" class="c5"><span class="c6">for i in range(1,
12):</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(calendar.monthrange(2014, i))</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the number of
leap days between 2000 and 2010</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(calendar.leapdays(2000, 2010))</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the dates in the
month as a matrix</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(calendar.monthcalendar(2015, 6))</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the day in the
week</span></p>
<p lang="en-GB" class="c5"><span class="c6">print('7/11/2015 day
of week:', calendar.weekday(2015, 11, 7))</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># get the calendar for
the year</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(calendar.prcal(2014))</span></p>
<p lang="en-GB" class="c7"> <br class="calibre1"/></p>
<p lang="en-GB" class="c5"><span class="c6"># change the first day
of the week</span></p>
<p lang="en-GB" class="c5"><span class="c6">calendar.setfirstweekday(3)</span></p>
<p lang="en-GB" class="c5"><span class="c6">print(calendar.prcal(2014))</span></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
<p lang="en-GB" class="western"><br class="calibre1"/>
<br class="calibre1"/></p>
</body>
</html>
